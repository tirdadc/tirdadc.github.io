<!doctype html>
<html>
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Mongo, Mongoid and Rails 4.1</title>

    <link href='//fonts.googleapis.com/css?family=Open+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

    <link href="/stylesheets/site.css" rel="stylesheet" />
    <link href="/stylesheets/highlighting.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
  </head>

  <div class="blog blog_2014 blog_2014_09 blog_2014_09_22 blog_2014_09_22_mongo-mongoid-and-rails-4">
    <div class="header">
      <h1><a href='/'>tirdadc</a></h1>
      <h2>Web Development | Ruby on Rails | React.js</h2>
    </div>
    <article>
      <h3>Mongo, Mongoid and Rails 4.1</h3>
      <time>Sep 22 2014</time>
      <p>I typically forget to set the <code>--skip-active-record</code> when creating a new app, so this is the
little kabuki dance you need to perform to get <a href="http://mongoid.org">Mongoid</a> to play nice with a freshly
created Rails 4.1 project.</p>

<ol>
<li><p>Add mongoid to your Gemfile:<br>
<code>gem &#39;mongoid&#39;, &#39;~&gt; 4.0.0&#39;</code></p></li>
<li><p>Generate your <code>mongoid.yml</code> configuration file:<br>
<code>rails g mongoid:config</code></p></li>
<li><p>Remove the sqlite gem now from your Gemfile:<br>
<code>gem &#39;sqlite3&#39;</code></p></li>
<li><p>Delete <code>database.yml</code></p></li>
<li><p>Remove any lines that reference active_record from your environment files:</p></li>
</ol>
<pre class="highlight ruby"><code><span class="c1"># development.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">active_record</span><span class="p">.</span><span class="nf">migration_error</span> <span class="o">=</span> <span class="ss">:page_load</span>

<span class="c1"># production.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">active_record</span><span class="p">.</span><span class="nf">dump_schema_after_migration</span> <span class="o">=</span> <span class="kp">false</span>
</code></pre>
<p><span>6.</span> Change this in your <code>application.rb</code>:</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'rails/all'</span>
</code></pre>
<p>to:
<code>ruby
require &quot;action_controller/railtie&quot;
require &quot;action_mailer/railtie&quot;
require &quot;sprockets/railtie&quot;
</code></p>

    </article>
  </div>
  <footer>
  <div>Â© 2016 Tirdad C.</div>
  <div>
    <a href="http://stackoverflow.com/users/3102766/tirdadc">Stack Overflow</a> |
    <a href="https://github.com/tirdadc">GitHub</a>
  </div>
</footer>

</html>
